{"version":3,"file":"vue.js","sources":["../src/observer/dep.js","../src/observer/array.js","../src/observer/index.js","../src/util/next-tick.js","../src/observer/scheduler.js","../src/global-api/const.js","../src/util/index.js","../src/observer/watcher.js","../src/state.js","../src/compiler/parse.js","../src/compiler/codegen.js","../src/compiler/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/global-api/mixin.js","../src/global-api/assets.js","../src/global-api/initExtend.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["// depå’Œwatcheræ˜¯å¤šå¯¹å¤šçš„å…³ç³»\r\n\r\n// æ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±çš„dep\r\n\r\nlet id = 0; //depå®ä¾‹çš„å”¯ä¸€æ ‡è¯†\r\nexport default class Dep {\r\n  constructor() {\r\n    this.id = id++; \r\n    this.subs = []; // è¿™ä¸ªæ˜¯å­˜æ”¾watcherçš„å®¹å™¨\r\n  }\r\n  depend() {\r\n    //   å¦‚æœå½“å‰å­˜åœ¨watcher\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this); // æŠŠè‡ªèº«-depå®ä¾‹å­˜æ”¾åœ¨watcheré‡Œé¢\r\n    }\r\n  }\r\n  notify() {\r\n    //   ä¾æ¬¡æ‰§è¡Œsubsé‡Œé¢çš„watcheræ›´æ–°æ–¹æ³•\r\n    this.subs.forEach((watcher) => watcher.update());\r\n  }\r\n  addSub(watcher) {\r\n    //   æŠŠwatcheråŠ å…¥åˆ°è‡ªèº«çš„subså®¹å™¨\r\n    this.subs.push(watcher);\r\n  }\r\n}\r\n// é»˜è®¤Dep.targetä¸ºnull\r\nDep.target=null\r\n// æ ˆç»“æ„ç”¨æ¥å­˜watcher\r\nconst targetStack = [];\r\n\r\nexport function pushTarget(watcher) {\r\n  targetStack.push(watcher);\r\n  Dep.target = watcher; // Dep.targetæŒ‡å‘å½“å‰watcher\r\n}\r\nexport function popTarget() {\r\n  targetStack.pop(); // å½“å‰watcherå‡ºæ ˆ æ‹¿åˆ°ä¸Šä¸€ä¸ªwatcher\r\n  Dep.target = targetStack[targetStack.length - 1];\r\n}\r\n","// å…ˆä¿ç•™æ•°ç»„åŸå‹\r\nconst arrayProto = Array.prototype;\r\n// ç„¶åå°†arrayMethodsç»§æ‰¿è‡ªæ•°ç»„åŸå‹\r\n// è¿™é‡Œæ˜¯é¢å‘åˆ‡ç‰‡ç¼–ç¨‹æ€æƒ³ï¼ˆAOPï¼‰--ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼ŒåŠ¨æ€çš„æ‰©å±•åŠŸèƒ½\r\nexport const arrayMethods = Object.create(arrayProto);\r\nlet methodsToPatch = [\r\n  \"push\",\r\n  \"pop\",\r\n  \"shift\",\r\n  \"unshift\",\r\n  \"splice\",\r\n  \"reverse\",\r\n  \"sort\",\r\n];\r\nmethodsToPatch.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    //   è¿™é‡Œä¿ç•™åŸå‹æ–¹æ³•çš„æ‰§è¡Œç»“æœ\r\n    const result = arrayProto[method].apply(this, args);\r\n    // è¿™å¥è¯æ˜¯å…³é”®\r\n    // thisä»£è¡¨çš„å°±æ˜¯æ•°æ®æœ¬èº« æ¯”å¦‚æ•°æ®æ˜¯{a:[1,2,3]} é‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨a.push(4)  thiså°±æ˜¯a  obå°±æ˜¯a.__ob__ è¿™ä¸ªå±æ€§ä»£è¡¨çš„æ˜¯è¯¥æ•°æ®å·²ç»è¢«å“åº”å¼è§‚å¯Ÿè¿‡äº† __ob__å¯¹è±¡æŒ‡çš„å°±æ˜¯Observerå®ä¾‹\r\n    const ob = this.__ob__;\r\n    let inserted;\r\n    switch (method) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case \"splice\":\r\n        inserted = args.slice(2);\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) ob.observeArray(inserted); // å¯¹æ–°å¢çš„æ¯ä¸€é¡¹è¿›è¡Œè§‚æµ‹\r\n    ob.dep.notify(); //æ•°ç»„æ´¾å‘æ›´æ–° obæŒ‡çš„å°±æ˜¯æ•°ç»„å¯¹åº”çš„Observerå®ä¾‹ æˆ‘ä»¬åœ¨getçš„æ—¶å€™åˆ¤æ–­å¦‚æœå±æ€§çš„å€¼è¿˜æ˜¯å¯¹è±¡é‚£ä¹ˆå°±åœ¨Observerå®ä¾‹çš„depæ”¶é›†ä¾èµ– æ‰€ä»¥è¿™é‡Œæ˜¯ä¸€ä¸€å¯¹åº”çš„  å¯ä»¥ç›´æ¥æ›´æ–°\r\n    return result;\r\n  };\r\n});\r\n","import { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer {\r\n  // è§‚æµ‹å€¼\r\n  constructor(value) {\r\n    this.value = value;\r\n    this.dep = new Dep(); //å½“æ•°ç»„ä½¿ç”¨7ç§é‡å†™æ–¹æ³•æ—¶  æ˜¯æ— æ³•è¿›è¡Œä¾èµ–æ”¶é›†å’Œæ´¾å‘æ›´æ–°çš„  æ­¤å±æ€§ä¸»è¦è¾…åŠ©æ•°ç»„æ›´æ–°\r\n    Object.defineProperty(value, \"__ob__\", {\r\n      //  å€¼æŒ‡ä»£çš„å°±æ˜¯Observerçš„å®ä¾‹\r\n      value: this,\r\n      //  ä¸å¯æšä¸¾\r\n      enumerable: false,\r\n      writable: true,\r\n      configurable: true,\r\n    });\r\n\r\n    if (Array.isArray(value)) {\r\n      // è¿™é‡Œå¯¹æ•°ç»„åšäº†é¢å¤–åˆ¤æ–­\r\n      // é€šè¿‡é‡å†™æ•°ç»„åŸå‹æ–¹æ³•æ¥å¯¹æ•°ç»„çš„ä¸ƒç§æ–¹æ³•è¿›è¡Œæ‹¦æˆª\r\n      value.__proto__ = arrayMethods;\r\n      // å¦‚æœæ•°ç»„é‡Œé¢è¿˜åŒ…å«æ•°ç»„ é€’å½’åˆ¤æ–­\r\n      this.observeArray(value);\r\n    } else {\r\n      this.walk(value);\r\n    }\r\n  }\r\n  walk(data) {\r\n    // è®©å¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§ä¾æ¬¡è¿›è¡Œè§‚æµ‹\r\n    let keys = Object.keys(data);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      let key = keys[i];\r\n      let value = data[key];\r\n      defineReactive(data, key, value);\r\n    }\r\n  }\r\n  observeArray(items) {\r\n    for (let i = 0; i < items.length; i++) {\r\n      observe(items[i]);\r\n    }\r\n  }\r\n}\r\n// Object.definePropertyæ•°æ®åŠ«æŒæ ¸å¿ƒ å…¼å®¹æ€§åœ¨ie9ä»¥åŠä»¥ä¸Š\r\nfunction defineReactive(data, key, value) {\r\n  let childOb = observe(value); // é€’å½’å…³é”® --å¦‚æœvalueè¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡ä¼šç»§ç»­èµ°ä¸€éodefineReactive å±‚å±‚éå†ä¸€ç›´åˆ°valueä¸æ˜¯å¯¹è±¡æ‰åœæ­¢\r\n  //   æ€è€ƒï¼Ÿå¦‚æœVueæ•°æ®åµŒå¥—å±‚çº§è¿‡æ·± >>æ€§èƒ½ä¼šå—å½±å“\r\n\r\n  let dep = new Dep(); // ä¸ºæ¯ä¸ªå±æ€§å®ä¾‹åŒ–ä¸€ä¸ªDep\r\n\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // é¡µé¢å–å€¼çš„æ—¶å€™ å¯ä»¥æŠŠwatcheræ”¶é›†åˆ°depé‡Œé¢--ä¾èµ–æ”¶é›†\r\n      if (Dep.target) {\r\n        // å¦‚æœæœ‰watcher depå°±ä¼šä¿å­˜watcher åŒæ—¶watcherä¹Ÿä¼šä¿å­˜dep\r\n        dep.depend();\r\n        if (childOb) {\r\n          // è¿™é‡Œè¡¨ç¤º å±æ€§çš„å€¼ä¾ç„¶æ˜¯ä¸€ä¸ªå¯¹è±¡ åŒ…å«æ•°ç»„å’Œå¯¹è±¡ childObæŒ‡ä»£çš„å°±æ˜¯Observerå®ä¾‹å¯¹è±¡  é‡Œé¢çš„depè¿›è¡Œä¾èµ–æ”¶é›†\r\n          // æ¯”å¦‚{a:[1,2,3]} å±æ€§aå¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ è§‚æµ‹æ•°ç»„çš„è¿”å›å€¼å°±æ˜¯å¯¹åº”æ•°ç»„çš„Observerå®ä¾‹å¯¹è±¡\r\n          childOb.dep.depend();\r\n          if (Array.isArray(value)) {\r\n            // å¦‚æœæ•°æ®ç»“æ„ç±»ä¼¼ {a:[1,2,[3,4,[5,6]]]} è¿™ç§æ•°ç»„å¤šå±‚åµŒå¥—  æ•°ç»„åŒ…å«æ•°ç»„çš„æƒ…å†µ  é‚£ä¹ˆæˆ‘ä»¬è®¿é—®açš„æ—¶å€™ åªæ˜¯å¯¹ç¬¬ä¸€å±‚çš„æ•°ç»„è¿›è¡Œäº†ä¾èµ–æ”¶é›† é‡Œé¢çš„æ•°ç»„å› ä¸ºæ²¡è®¿é—®åˆ°  æ‰€ä»¥äº”å¤§æ”¶é›†ä¾èµ–  ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¹å˜äº†aé‡Œé¢çš„ç¬¬äºŒå±‚æ•°ç»„çš„å€¼  æ˜¯éœ€è¦æ›´æ–°é¡µé¢çš„  æ‰€ä»¥éœ€è¦å¯¹æ•°ç»„é€’å½’è¿›è¡Œä¾èµ–æ”¶é›†\r\n            if (Array.isArray(value)) {\r\n              // å¦‚æœå†…éƒ¨è¿˜æ˜¯æ•°ç»„\r\n              dependArray(value); // ä¸åœçš„è¿›è¡Œä¾èµ–æ”¶é›†\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      // å¦‚æœèµ‹å€¼çš„æ–°å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡  éœ€è¦è§‚æµ‹\r\n      observe(newValue);\r\n      value = newValue;\r\n      dep.notify(); // é€šçŸ¥æ¸²æŸ“watcherå»æ›´æ–°--æ´¾å‘æ›´æ–°\r\n    },\r\n  });\r\n}\r\n// é€’å½’æ”¶é›†æ•°ç»„ä¾èµ–\r\nfunction dependArray(value) {\r\n  for (let e, i = 0, l = value.length; i < l; i++) {\r\n    e = value[i];\r\n    // e.__ob__ä»£è¡¨eå·²ç»è¢«å“åº”å¼è§‚æµ‹äº† ä½†æ˜¯æ²¡æœ‰æ”¶é›†ä¾èµ– æ‰€ä»¥æŠŠä»–ä»¬æ”¶é›†åˆ°è‡ªå·±çš„Observerå®ä¾‹çš„depé‡Œé¢\r\n    e && e.__ob__ && e.__ob__.dep.depend();\r\n    if (Array.isArray(e)) {\r\n      // å¦‚æœæ•°ç»„é‡Œé¢è¿˜æœ‰æ•°ç»„  å°±é€’å½’å»æ”¶é›†ä¾èµ–\r\n      dependArray(e);\r\n    }\r\n  }\r\n}\r\nexport function observe(data) {\r\n  // é€’å½’è¿›è¡Œå±æ€§åŠ«æŒ\r\n  if (typeof data !== \"object\" || data == null) {\r\n    return;\r\n  }\r\n  return new Observer(data);\r\n}\r\n","let callbacks = [];\r\nlet pending = false;\r\nfunction flushCallbacks() {\r\n \r\n    pending = false;  //æŠŠæ ‡å¿—è¿˜åŸä¸ºfalse\r\n    // ä¾æ¬¡æ‰§è¡Œå›è°ƒ\r\n    for (let i = 0; i < callbacks.length; i++) {\r\n      callbacks[i]();\r\n    }\r\n}\r\nlet timerFunc; //å®šä¹‰å¼‚æ­¥æ–¹æ³•  é‡‡ç”¨ä¼˜é›…é™çº§\r\nif (typeof Promise !== \"undefined\") {\r\n  // å¦‚æœæ”¯æŒpromise\r\n    const p = Promise.resolve();\r\n  timerFunc = () => {\r\n    p.then(flushCallbacks);\r\n  };\r\n} else if (typeof MutationObserver !== \"undefined\") {\r\n  // MutationObserver ä¸»è¦æ˜¯ç›‘å¬domå˜åŒ– ä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•\r\n  let counter = 1;\r\n  const observer = new MutationObserver(flushCallbacks);\r\n  const textNode = document.createTextNode(String(counter));\r\n  observer.observe(textNode, {\r\n    characterData: true,\r\n  });\r\n  timerFunc = () => {\r\n    counter = (counter + 1) % 2;\r\n    textNode.data = String(counter);\r\n  };\r\n} else if (typeof setImmediate !== \"undefined\") {\r\n  // å¦‚æœå‰é¢éƒ½ä¸æ”¯æŒ åˆ¤æ–­setImmediate\r\n  timerFunc = () => {\r\n    setImmediate(flushCallbacks);\r\n  };\r\n} else {\r\n  // æœ€åé™çº§é‡‡ç”¨setTimeout\r\n  timerFunc = () => {\r\n    setTimeout(flushCallbacks, 0);\r\n  };\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  // é™¤äº†æ¸²æŸ“watcher  è¿˜æœ‰ç”¨æˆ·è‡ªå·±æ‰‹åŠ¨è°ƒç”¨çš„nextTick ä¸€èµ·è¢«æ”¶é›†åˆ°æ•°ç»„\r\n  callbacks.push(cb);\r\n  if (!pending) {\r\n    // å¦‚æœå¤šæ¬¡è°ƒç”¨nextTick  åªä¼šæ‰§è¡Œä¸€æ¬¡å¼‚æ­¥ ç­‰å¼‚æ­¥é˜Ÿåˆ—æ¸…ç©ºä¹‹åå†æŠŠæ ‡å¿—å˜ä¸ºfalse\r\n    pending = true;\r\n    timerFunc();\r\n  }\r\n}\r\n","import { nextTick } from \"../util/next-tick\";\r\nlet queue = [];\r\nlet has = {};\r\nfunction flushSchedulerQueue() {\r\n  for (let index = 0; index < queue.length; index++) {\r\n    //   è°ƒç”¨watcherçš„runæ–¹æ³• æ‰§è¡ŒçœŸæ­£çš„æ›´æ–°æ“ä½œ\r\n    queue[index].run();\r\n  }\r\n  // æ‰§è¡Œå®Œä¹‹åæ¸…ç©ºé˜Ÿåˆ—\r\n  queue = [];\r\n  has = {};\r\n}\r\n\r\n// å®ç°å¼‚æ­¥é˜Ÿåˆ—æœºåˆ¶\r\nexport function queueWatcher(watcher) {\r\n  const id = watcher.id;\r\n  //   watcherå»é‡\r\n  if (has[id] === undefined) {\r\n    //  åŒæ­¥ä»£ç æ‰§è¡Œ æŠŠå…¨éƒ¨çš„watcheréƒ½æ”¾åˆ°é˜Ÿåˆ—é‡Œé¢å»\r\n    queue.push(watcher);\r\n    has[id] = true;\r\n    // è¿›è¡Œå¼‚æ­¥è°ƒç”¨\r\n    nextTick(flushSchedulerQueue);\r\n  }\r\n}\r\n","export const ASSETS_TYPE = [\"component\", \"directive\", \"filter\"];\r\n","import { ASSETS_TYPE } from \"../global-api/const\";\r\nexport const LIFECYCLE_HOOKS = [\r\n  \"beforeCreate\",\r\n  \"created\",\r\n  \"beforeMount\",\r\n  \"mounted\",\r\n  \"beforeUpdate\",\r\n  \"updated\",\r\n  \"beforeDestroy\",\r\n  \"destroyed\",\r\n];\r\n\r\n// åˆå¹¶ç­–ç•¥\r\nconst strats = {};\r\n\r\n//ç”Ÿå‘½å‘¨æœŸåˆå¹¶ç­–ç•¥\r\nfunction mergeHook(parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal);\r\n    } else {\r\n      return [childVal];\r\n    }\r\n  } else {\r\n    return parentVal;\r\n  }\r\n}\r\n\r\n// ç»„ä»¶ æŒ‡ä»¤ è¿‡æ»¤å™¨çš„åˆå¹¶ç­–ç•¥\r\nfunction mergeAssets(parentVal, childVal) {\r\n  const res = Object.create(parentVal); //æ¯”å¦‚æœ‰åŒåçš„å…¨å±€ç»„ä»¶å’Œè‡ªå·±å®šä¹‰çš„å±€éƒ¨ç»„ä»¶ é‚£ä¹ˆparentValä»£è¡¨å…¨å±€ç»„ä»¶ è‡ªå·±å®šä¹‰çš„ç»„ä»¶æ˜¯childVal  é¦–å…ˆä¼šæŸ¥æ‰¾è‡ªå·²å±€éƒ¨ç»„ä»¶æœ‰å°±ç”¨è‡ªå·±çš„  æ²¡æœ‰å°±ä»åŸå‹ç»§æ‰¿å…¨å±€ç»„ä»¶  res.__proto__===parentVal\r\n  if (childVal) {\r\n    for (let k in childVal) {\r\n      res[k] = childVal[k];\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nLIFECYCLE_HOOKS.forEach((hook) => {\r\n  strats[hook] = mergeHook;\r\n});\r\nASSETS_TYPE.forEach((type) => {\r\n  strats[type + \"s\"] = mergeAssets;\r\n});\r\n\r\nexport function mergeOptions(parent, child) {\r\n  const options = {};\r\n  // éå†çˆ¶äº²\r\n  for (let k in parent) {\r\n    mergeFiled(k);\r\n  }\r\n  // çˆ¶äº²æ²¡æœ‰ å„¿å­æœ‰\r\n  for (let k in child) {\r\n    if (!parent.hasOwnProperty(k)) {\r\n      mergeFiled(k);\r\n    }\r\n  }\r\n\r\n  function mergeFiled(k) {\r\n    //çœŸæ­£åˆå¹¶å­—æ®µæ–¹æ³•\r\n    if (strats[k]) {\r\n      options[k] = strats[k](parent[k], child[k]);\r\n    } else {\r\n      // é»˜è®¤ç­–ç•¥\r\n      options[k] = child[k] ? child[k] : parent[k];\r\n    }\r\n  }\r\n  return options;\r\n}\r\n\r\nexport function isObject(data) {\r\n  if (typeof data !== \"object\" || data == null) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function isReservedTag(tagName) {\r\n  // å®šä¹‰å¸¸è§æ ‡ç­¾\r\n  let str =\r\n    \"html,body,base,head,link,meta,style,title,\" +\r\n    \"address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,\" +\r\n    \"div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,\" +\r\n    \"a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,\" +\r\n    \"s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,\" +\r\n    \"embed,object,param,source,canvas,script,noscript,del,ins,\" +\r\n    \"caption,col,colgroup,table,thead,tbody,td,th,tr,\" +\r\n    \"button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,\" +\r\n    \"output,progress,select,textarea,\" +\r\n    \"details,dialog,menu,menuitem,summary,\" +\r\n    \"content,element,shadow,template,blockquote,iframe,tfoot\";\r\n  let obj = {};\r\n  str.split(\",\").forEach((tag) => {\r\n    obj[tag] = true;\r\n  });\r\n  return obj[tagName];\r\n}\r\n","import { pushTarget, popTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./scheduler\";\r\nimport {isObject} from '../util/index'\r\n// å…¨å±€å˜é‡id  æ¯æ¬¡new Watcheréƒ½ä¼šè‡ªå¢\r\nlet id = 0;\r\n\r\nexport default class Watcher {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.vm = vm;\r\n    this.exprOrFn = exprOrFn;\r\n    this.cb = cb; //å›è°ƒå‡½æ•° æ¯”å¦‚åœ¨watcheræ›´æ–°ä¹‹å‰å¯ä»¥æ‰§è¡ŒbeforeUpdateæ–¹æ³•\r\n    this.options = options; //é¢å¤–çš„é€‰é¡¹ trueä»£è¡¨æ¸²æŸ“watcher\r\n    this.id = id++; // watcherçš„å”¯ä¸€æ ‡è¯†\r\n    this.deps = []; //å­˜æ”¾depçš„å®¹å™¨\r\n    this.depsId = new Set(); //ç”¨æ¥å»é‡dep\r\n    this.user = options.user; //æ ‡è¯†ç”¨æˆ·watcher\r\n    this.lazy = options.lazy; //æ ‡è¯†è®¡ç®—å±æ€§watcher\r\n    this.dirty = this.lazy; //dirtyå¯å˜  è¡¨ç¤ºè®¡ç®—watcheræ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—-æ‰§è¡Œç”¨æˆ·å®šä¹‰çš„æ–¹æ³•\r\n    // å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå‡½æ•°\r\n    if (typeof exprOrFn === \"function\") {\r\n      this.getter = exprOrFn;\r\n    } else {\r\n      this.getter = function () {\r\n        //ç”¨æˆ·watcherä¼ è¿‡æ¥çš„å¯èƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²   ç±»ä¼¼a.a.a.a.b\r\n        let path = exprOrFn.split(\".\");\r\n        let obj = vm;\r\n        for (let i = 0; i < path.length; i++) {\r\n          obj = obj[path[i]]; //vm.a.a.a.a.b\r\n        }\r\n        return obj;\r\n      };\r\n    }\r\n    // éè®¡ç®—å±æ€§å®ä¾‹åŒ–å°±ä¼šé»˜è®¤è°ƒç”¨getæ–¹æ³• è¿›è¡Œå–å€¼  ä¿ç•™ç»“æœ\r\n    this.value = this.lazy ? undefined : this.get();\r\n  }\r\n  get() {\r\n    pushTarget(this); // åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰å…ˆæŠŠå½“å‰watcherå®ä¾‹æ¨åˆ°å…¨å±€Dep.targetä¸Š\r\n    const res = this.getter.call(this.vm); //å¦‚æœwatcheræ˜¯æ¸²æŸ“watcher é‚£ä¹ˆå°±ç›¸å½“äºæ‰§è¡Œ  vm._update(vm._render()) è¿™ä¸ªæ–¹æ³•åœ¨renderå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šå–å€¼ ä»è€Œå®ç°ä¾èµ–æ”¶é›†\r\n    popTarget(); // åœ¨è°ƒç”¨æ–¹æ³•ä¹‹åæŠŠå½“å‰watcherå®ä¾‹ä»å…¨å±€Dep.targetç§»é™¤\r\n    return res;\r\n  }\r\n  //   æŠŠdepæ”¾åˆ°depsé‡Œé¢ åŒæ—¶ä¿è¯åŒä¸€ä¸ªdepåªè¢«ä¿å­˜åˆ°watcherä¸€æ¬¡  åŒæ ·çš„  åŒä¸€ä¸ªwatcherä¹Ÿåªä¼šä¿å­˜åœ¨depä¸€æ¬¡\r\n  addDep(dep) {\r\n    let id = dep.id;\r\n    if (!this.depsId.has(id)) {\r\n      this.depsId.add(id);\r\n      this.deps.push(dep);\r\n      //   ç›´æ¥è°ƒç”¨depçš„addSubæ–¹æ³•  æŠŠè‡ªå·±--watcherå®ä¾‹æ·»åŠ åˆ°depçš„subså®¹å™¨é‡Œé¢\r\n      dep.addSub(this);\r\n    }\r\n  }\r\n  //   è¿™é‡Œç®€å•çš„å°±æ‰§è¡Œä»¥ä¸‹getæ–¹æ³•  ä¹‹åæ¶‰åŠåˆ°è®¡ç®—å±æ€§å°±ä¸ä¸€æ ·äº†\r\n  update() {\r\n    // è®¡ç®—å±æ€§ä¾èµ–çš„å€¼å‘ç”Ÿå˜åŒ– åªéœ€è¦æŠŠdirtyç½®ä¸ºtrue  ä¸‹æ¬¡è®¿é—®åˆ°äº†é‡æ–°è®¡ç®—\r\n    if (this.lazy) {\r\n      this.dirty = true;\r\n    }else{\r\n      // æ¯æ¬¡watcherè¿›è¡Œæ›´æ–°çš„æ—¶å€™  å¯ä»¥è®©ä»–ä»¬å…ˆç¼“å­˜èµ·æ¥  ä¹‹åå†ä¸€èµ·è°ƒç”¨\r\n      // å¼‚æ­¥é˜Ÿåˆ—æœºåˆ¶\r\n      queueWatcher(this);\r\n    }\r\n  }\r\n  evaluate() {\r\n    this.value = this.get();\r\n    this.dirty = false;\r\n  }\r\n  depend(){\r\n    // è®¡ç®—å±æ€§çš„watcherå­˜å‚¨äº†ä¾èµ–é¡¹çš„dep \r\n    let i=this.deps.length\r\n    while(i--){\r\n      this.deps[i].depend() //è°ƒç”¨ä¾èµ–é¡¹çš„depå»æ”¶é›†æ¸²æŸ“watcher\r\n    }\r\n  }\r\n  run() {\r\n    const newVal = this.get(); //æ–°å€¼\r\n    const oldVal = this.value; //è€å€¼\r\n    this.value = newVal; //è·Ÿç€ä¹‹å  è€å€¼å°±æˆä¸ºäº†ç°åœ¨çš„å€¼\r\n    if (this.user) {\r\n      if(newVal!==oldVal||isObject(newVal)){\r\n        this.cb.call(this.vm, newVal, oldVal);\r\n      }\r\n    } else {\r\n      // æ¸²æŸ“watcher\r\n      this.cb.call(this.vm);\r\n    }\r\n  }\r\n}\r\n","import Dep from \"./observer/dep.js\";\r\nimport { observe } from \"./observer/index.js\";\r\nimport Watcher from \"./observer/watcher\";\r\n// åˆå§‹åŒ–çŠ¶æ€ æ³¨æ„è¿™é‡Œçš„é¡ºåº æ¯”å¦‚æˆ‘ç»å¸¸é¢è¯•ä¼šé—®åˆ° æ˜¯å¦èƒ½åœ¨dataé‡Œé¢ç›´æ¥ä½¿ç”¨propçš„å€¼ ä¸ºä»€ä¹ˆï¼Ÿ\r\n// è¿™é‡Œåˆå§‹åŒ–çš„é¡ºåºä¾æ¬¡æ˜¯ prop>methods>data>computed>watch\r\nexport function initState(vm) {\r\n  // è·å–ä¼ å…¥çš„æ•°æ®å¯¹è±¡\r\n  const opts = vm.$options;\r\n  if (opts.props) {\r\n    initProps(vm);\r\n  }\r\n  if (opts.methods) {\r\n    initMethod(vm);\r\n  }\r\n  if (opts.data) {\r\n    // åˆå§‹åŒ–data\r\n    initData(vm);\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm);\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm);\r\n  }\r\n}\r\nfunction initProps() {}\r\nfunction initMethod() {}\r\n// åˆå§‹åŒ–dataæ•°æ®\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  //   å®ä¾‹çš„_dataå±æ€§å°±æ˜¯ä¼ å…¥çš„data\r\n  // vueç»„ä»¶dataæ¨èä½¿ç”¨å‡½æ•° é˜²æ­¢æ•°æ®åœ¨ç»„ä»¶ä¹‹é—´å…±äº«\r\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\r\n\r\n  // æŠŠdataæ•°æ®ä»£ç†åˆ°vm ä¹Ÿå°±æ˜¯Vueå®ä¾‹ä¸Šé¢ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨this.aæ¥è®¿é—®this._data.a\r\n  for (let key in data) {\r\n    proxy(vm, `_data`, key);\r\n  }\r\n\r\n  //   å¯¹æ•°æ®è¿›è¡Œè§‚æµ‹ --å“åº”å¼æ•°æ®æ ¸å¿ƒ\r\n  observe(data);\r\n}\r\nfunction initComputed(vm) {\r\n  const computed = vm.$options.computed;\r\n\r\n  const watchers = (vm._computedWatchers = {}); //ç”¨æ¥å­˜æ”¾è®¡ç®—watcher\r\n\r\n  for (let k in computed) {\r\n    const userDef = computed[k]; //è·å–ç”¨æˆ·å®šä¹‰çš„è®¡ç®—å±æ€§\r\n    const getter = typeof userDef === \"function\" ? userDef : userDef.get; //åˆ›å»ºè®¡ç®—å±æ€§watcherä½¿ç”¨\r\n    // åˆ›å»ºè®¡ç®—watcher  lazyè®¾ç½®ä¸ºtrue\r\n    watchers[k] = new Watcher(vm, getter, () => {}, { lazy: true });\r\n    defineComputed(vm, k, userDef);\r\n  }\r\n}\r\n\r\nconst sharedPropertyDefinition = {\r\n  enumerable: true,\r\n  configurable: true,\r\n  get: () => {},\r\n  set: () => {},\r\n};\r\nfunction defineComputed(target, key, userDef) {\r\n  if (typeof userDef === \"function\") {\r\n    // å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°  éœ€è¦æ‰‹åŠ¨èµ‹å€¼åˆ°getä¸Š\r\n    sharedPropertyDefinition.get = createComputedGetter(key);\r\n  } else {\r\n    sharedPropertyDefinition.get = createComputedGetter(key);\r\n    sharedPropertyDefinition.set = userDef.set;\r\n  }\r\n  Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\r\n\r\nfunction createComputedGetter(key) {\r\n  return function () {\r\n    const watcher = this._computedWatchers[key]; //è·å–å¯¹åº”çš„è®¡ç®—å±æ€§watcher\r\n    if (watcher) {\r\n      if (watcher.dirty) {\r\n        watcher.evaluate(); //è®¡ç®—å±æ€§å–å€¼çš„æ—¶å€™ å¦‚æœæ˜¯è„çš„  éœ€è¦é‡æ–°æ±‚å€¼\r\n        // å¦‚æœDepè¿˜å­˜åœ¨target è¿™ä¸ªæ—¶å€™ä¸€èˆ¬ä¸ºæ¸²æŸ“watcher è®¡ç®—å±æ€§ä¾èµ–çš„æ•°æ®ä¹Ÿéœ€è¦æ”¶é›†\r\n        if (Dep.target) {\r\n          watcher.depend()\r\n        }\r\n      }\r\n      return watcher.value;\r\n    }\r\n  };\r\n}\r\n\r\n// åˆå§‹åŒ–watch\r\nfunction initWatch(vm) {\r\n  let watch = vm.$options.watch;\r\n  for (let k in watch) {\r\n    const handler = watch[k]; //å¯èƒ½æ˜¯æ•°ç»„ å¯¹è±¡ å‡½æ•° å­—ç¬¦ä¸²\r\n    if (Array.isArray(handler)) {\r\n      handler.forEach((handle) => {\r\n        createWatcher(vm, k, handle);\r\n      });\r\n    } else {\r\n      createWatcher(vm, k, handler);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher(vm, exprOrFn, handler, options = {}) {\r\n  if (typeof handler === \"object\") {\r\n    options = handler; //ä¿å­˜ç”¨æˆ·ä¼ å…¥çš„å¯¹è±¡\r\n    handler = handler.handler; //æ˜¯å‡½æ•°\r\n  }\r\n  if (typeof handler === \"string\") {\r\n    handler = vm[handler];\r\n  }\r\n  return vm.$watch(exprOrFn, handler, options);\r\n}\r\n\r\nfunction proxy(object, sourceKey, key) {\r\n  Object.defineProperty(object, key, {\r\n    get() {\r\n      return object[sourceKey][key];\r\n    },\r\n    set(newValue) {\r\n      object[sourceKey][key] = newValue;\r\n    },\r\n  });\r\n}\r\n\r\nexport function stateMixin(Vue) {\r\n  Vue.prototype.$watch = function (exprOrFn, cb, options) {\r\n    const vm = this;\r\n    // è¿™é‡Œè¡¨ç¤ºæ˜¯ä¸€ä¸ªç”¨æˆ·watcher\r\n    let watcher = new Watcher(vm, exprOrFn, cb, { ...options, user: true });\r\n    if (options.immediate) {\r\n      cb(); //å¦‚æœç«‹åˆ»æ‰§è¡Œ\r\n    }\r\n  };\r\n}\r\n","// ä»¥ä¸‹ä¸ºæºç çš„æ­£åˆ™  å¯¹æ­£åˆ™è¡¨è¾¾å¼ä¸æ¸…æ¥šçš„åŒå­¦å¯ä»¥å‚è€ƒå°ç¼–ä¹‹å‰å†™çš„æ–‡ç« (å‰ç«¯è¿›é˜¶é«˜è–ªå¿…çœ‹ - æ­£åˆ™ç¯‡);\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; //åŒ¹é…æ ‡ç­¾å å½¢å¦‚ abc-123\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //åŒ¹é…ç‰¹æ®Šæ ‡ç­¾ å½¢å¦‚ abc:234 å‰é¢çš„abc:å¯æœ‰å¯æ— \r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // åŒ¹é…æ ‡ç­¾å¼€å§‹ å½¢å¦‚ <abc-123 æ•è·é‡Œé¢çš„æ ‡ç­¾å\r\nconst startTagClose = /^\\s*(\\/?)>/; // åŒ¹é…æ ‡ç­¾ç»“æŸ  >\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // åŒ¹é…æ ‡ç­¾ç»“å°¾ å¦‚ </abc-123> æ•è·é‡Œé¢çš„æ ‡ç­¾å\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // åŒ¹é…å±æ€§  å½¢å¦‚ id=\"app\"\r\n\r\n// è§£ææ ‡ç­¾ç”Ÿæˆastæ ¸å¿ƒ\r\nexport function parse(html) {\r\n  let root, currentParent; //ä»£è¡¨æ ¹èŠ‚ç‚¹ å’Œå½“å‰çˆ¶èŠ‚ç‚¹\r\n  // æ ˆç»“æ„ æ¥è¡¨ç¤ºå¼€å§‹å’Œç»“æŸæ ‡ç­¾\r\n  let stack = [];\r\n  // æ ‡è¯†å…ƒç´ å’Œæ–‡æœ¬type\r\n  const ELEMENT_TYPE = 1;\r\n  const TEXT_TYPE = 3;\r\n  // ç”Ÿæˆastæ–¹æ³•\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      type: ELEMENT_TYPE,\r\n      children: [],\r\n      attrs,\r\n      parent: null,\r\n    };\r\n  }\r\n\r\n  // å¯¹å¼€å§‹æ ‡ç­¾è¿›è¡Œå¤„ç†\r\n  function handleStartTag({ tagName, attrs }) {\r\n    let element = createASTElement(tagName, attrs);\r\n    if (!root) {\r\n      root = element;\r\n    }\r\n    currentParent = element;\r\n    stack.push(element);\r\n  }\r\n\r\n  // å¯¹ç»“æŸæ ‡ç­¾è¿›è¡Œå¤„ç†\r\n  function handleEndTag(tagName) {\r\n    // æ ˆç»“æ„ []\r\n    // æ¯”å¦‚ <div><span></span></div> å½“é‡åˆ°ç¬¬ä¸€ä¸ªç»“æŸæ ‡ç­¾</span>æ—¶ ä¼šåŒ¹é…åˆ°æ ˆé¡¶<span>å…ƒç´ å¯¹åº”çš„ast å¹¶å–å‡ºæ¥\r\n    let element = stack.pop();\r\n    // å½“å‰çˆ¶å…ƒç´ å°±æ˜¯æ ˆé¡¶çš„ä¸Šä¸€ä¸ªå…ƒç´  åœ¨è¿™é‡Œå°±ç±»ä¼¼div\r\n    currentParent = stack[stack.length - 1];\r\n    // å»ºç«‹parentå’Œchildrenå…³ç³»\r\n    if (currentParent) {\r\n      element.parent = currentParent;\r\n      currentParent.children.push(element);\r\n    }\r\n  }\r\n\r\n  // å¯¹æ–‡æœ¬è¿›è¡Œå¤„ç†\r\n  function handleChars(text) {\r\n    // å»æ‰ç©ºæ ¼\r\n    text = text.replace(/\\s/g, \"\");\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: TEXT_TYPE,\r\n        text,\r\n      });\r\n    }\r\n  }\r\n  while (html) {\r\n    // æŸ¥æ‰¾<\r\n    let textEnd = html.indexOf(\"<\");\r\n    // å¦‚æœ<åœ¨ç¬¬ä¸€ä¸ª é‚£ä¹ˆè¯æ˜æ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾ ä¸ç®¡æ˜¯å¼€å§‹è¿˜æ˜¯ç»“æŸæ ‡ç­¾\r\n    if (textEnd === 0) {\r\n      // å¦‚æœå¼€å§‹æ ‡ç­¾è§£ææœ‰ç»“æœ\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        // æŠŠè§£æå¥½çš„æ ‡ç­¾åå’Œå±æ€§è§£æç”Ÿæˆast\r\n        handleStartTag(startTagMatch);\r\n        continue;\r\n      }\r\n\r\n      // åŒ¹é…ç»“æŸæ ‡ç­¾</\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length);\r\n        handleEndTag(endTagMatch[1]);\r\n        continue;\r\n      }\r\n    }\r\n\r\n    let text;\r\n    // å½¢å¦‚ hello<div></div>\r\n    if (textEnd >= 0) {\r\n      // è·å–æ–‡æœ¬\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      handleChars(text);\r\n    }\r\n  }\r\n\r\n  // åŒ¹é…å¼€å§‹æ ‡ç­¾\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen);\r\n\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      };\r\n      //åŒ¹é…åˆ°äº†å¼€å§‹æ ‡ç­¾ å°±æˆªå–æ‰\r\n      advance(start[0].length);\r\n\r\n      // å¼€å§‹åŒ¹é…å±æ€§\r\n      // endä»£è¡¨ç»“æŸç¬¦å·>  å¦‚æœä¸æ˜¯åŒ¹é…åˆ°äº†ç»“æŸæ ‡ç­¾\r\n      // attr è¡¨ç¤ºåŒ¹é…çš„å±æ€§\r\n      let end, attr;\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        advance(attr[0].length);\r\n        attr = {\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5], //è¿™é‡Œæ˜¯å› ä¸ºæ­£åˆ™æ•è·æ”¯æŒåŒå¼•å· å•å¼•å· å’Œæ— å¼•å·çš„å±æ€§å€¼\r\n        };\r\n        match.attrs.push(attr);\r\n      }\r\n      if (end) {\r\n        //   ä»£è¡¨ä¸€ä¸ªæ ‡ç­¾åŒ¹é…åˆ°ç»“æŸçš„>äº† ä»£è¡¨å¼€å§‹æ ‡ç­¾è§£æå®Œæ¯•\r\n        advance(1);\r\n        return match;\r\n      }\r\n    }\r\n  }\r\n  //æˆªå–htmlå­—ç¬¦ä¸² æ¯æ¬¡åŒ¹é…åˆ°äº†å°±å¾€å‰ç»§ç»­åŒ¹é…\r\n  function advance(n) {\r\n    html = html.substring(n);\r\n  }\r\n  //   è¿”å›ç”Ÿæˆçš„ast\r\n  return root;\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; //åŒ¹é…èŠ±æ‹¬å· {{  }} æ•è·èŠ±æ‹¬å·é‡Œé¢çš„å†…å®¹\r\n// åˆ¤æ–­èŠ‚ç‚¹ç±»å‹  \r\n// ä¸»è¦åŒ…å«å¤„ç†æ–‡æœ¬æ ¸å¿ƒ\r\n// æºç è¿™å—åŒ…å«äº†å¤æ‚çš„å¤„ç†  æ¯”å¦‚ v-once v-for v-if è‡ªå®šä¹‰æŒ‡ä»¤ slotç­‰ç­‰  å’±ä»¬è¿™é‡Œåªè€ƒè™‘æ™®é€šæ–‡æœ¬å’Œå˜é‡è¡¨è¾¾å¼{{}}çš„å¤„ç†\r\n\r\nfunction gen(node) {\r\n  // å¦‚æœæ˜¯å…ƒç´ ç±»å‹\r\n  if (node.type == 1) {\r\n    //   é€’å½’åˆ›å»º\r\n    return generate(node);\r\n  } else {\r\n    //   å¦‚æœæ˜¯æ–‡æœ¬èŠ‚ç‚¹\r\n    let text = node.text;\r\n    // ä¸å­˜åœ¨èŠ±æ‹¬å·å˜é‡è¡¨è¾¾å¼\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})`;\r\n    }\r\n    // æ­£åˆ™æ˜¯å…¨å±€æ¨¡å¼ æ¯æ¬¡éœ€è¦é‡ç½®æ­£åˆ™çš„lastIndexå±æ€§  ä¸ç„¶ä¼šå¼•å‘åŒ¹é…bug\r\n    let lastIndex = (defaultTagRE.lastIndex = 0);\r\n    let tokens = [];\r\n    let match, index;\r\n\r\n    while ((match = defaultTagRE.exec(text))) {\r\n        // indexä»£è¡¨åŒ¹é…åˆ°çš„ä½ç½®\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        //   åŒ¹é…åˆ°çš„{{ä½ç½®  åœ¨tokensé‡Œé¢æ”¾å…¥æ™®é€šæ–‡æœ¬\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n    //   æ”¾å…¥æ•è·åˆ°çš„å˜é‡å†…å®¹\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n    //   åŒ¹é…æŒ‡é’ˆåç§»\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    // å¦‚æœåŒ¹é…å®Œäº†èŠ±æ‹¬å·  texté‡Œé¢è¿˜æœ‰å‰©ä½™çš„æ™®é€šæ–‡æœ¬ é‚£ä¹ˆç»§ç»­push\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    // _vè¡¨ç¤ºåˆ›å»ºæ–‡æœ¬\r\n    return `_v(${tokens.join(\"+\")})`;\r\n  }\r\n}\r\n\r\n// å¤„ç†attrså±æ€§\r\nfunction genProps(attrs) {\r\n  let str = \"\";\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    // å¯¹attrså±æ€§é‡Œé¢çš„styleåšç‰¹æ®Šå¤„ç†\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach((item) => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\n// ç”Ÿæˆå­èŠ‚ç‚¹ è°ƒç”¨genå‡½æ•°è¿›è¡Œé€’å½’åˆ›å»º\r\nfunction getChildren(el) {\r\n  const children = el.children;\r\n  if (children) {\r\n    return `${children.map((c) => gen(c)).join(\",\")}`;\r\n  }\r\n}\r\n// é€’å½’åˆ›å»ºç”Ÿæˆcode\r\nexport function generate(el) {\r\n  let children = getChildren(el);\r\n  let code = `_c('${el.tag}',${\r\n    el.attrs.length ? `${genProps(el.attrs)}` : \"undefined\"\r\n  }${children ? `,${children}` : \"\"})`;\r\n  return code;\r\n}\r\n","import { parse } from \"./parse\";\r\nimport { generate } from \"./codegen\";\r\nexport function compileToFunctions(template) {\r\n  // æˆ‘ä»¬éœ€è¦æŠŠhtmlå­—ç¬¦ä¸²å˜æˆrenderå‡½æ•°\r\n  // 1.æŠŠhtmlä»£ç è½¬æˆastè¯­æ³•æ ‘  astç”¨æ¥æè¿°ä»£ç æœ¬èº«å½¢æˆæ ‘ç»“æ„ ä¸ä»…å¯ä»¥æè¿°html ä¹Ÿèƒ½æè¿°cssä»¥åŠjsè¯­æ³•\r\n  // å¾ˆå¤šåº“éƒ½è¿ç”¨åˆ°äº†ast æ¯”å¦‚ webpack babel eslintç­‰ç­‰\r\n  let ast = parse(template);\r\n  // 2.ä¼˜åŒ–é™æ€èŠ‚ç‚¹\r\n  // è¿™ä¸ªæœ‰å…´è¶£çš„å¯ä»¥å»çœ‹æºç   ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½å°±ä¸å®ç°äº†\r\n  //   if (options.optimize !== false) {\r\n  //     optimize(ast, options);\r\n  //   }\r\n\r\n  // 3.é€šè¿‡ast é‡æ–°ç”Ÿæˆä»£ç \r\n  // æˆ‘ä»¬æœ€åç”Ÿæˆçš„ä»£ç éœ€è¦å’Œrenderå‡½æ•°ä¸€æ ·\r\n  // ç±»ä¼¼_c('div',{id:\"app\"},_c('div',undefined,_v(\"hello\"+_s(name)),_c('span',undefined,_v(\"world\"))))\r\n  // _cä»£è¡¨åˆ›å»ºå…ƒç´  _vä»£è¡¨åˆ›å»ºæ–‡æœ¬ _sä»£è¡¨æ–‡Json.stringify--æŠŠå¯¹è±¡è§£ææˆæ–‡æœ¬\r\n  let code = generate(ast);\r\n  //   ä½¿ç”¨withè¯­æ³•æ”¹å˜ä½œç”¨åŸŸä¸ºthis  ä¹‹åè°ƒç”¨renderå‡½æ•°å¯ä»¥ä½¿ç”¨callæ”¹å˜this æ–¹ä¾¿codeé‡Œé¢çš„å˜é‡å–å€¼\r\n  let renderFn = new Function(`with(this){return ${code}}`);\r\n  return renderFn;\r\n}\r\n","// patchç”¨æ¥æ¸²æŸ“å’Œæ›´æ–°è§†å›¾ \r\nexport function patch(oldVnode, vnode) {\r\n  // åˆ¤æ–­ä¼ å…¥çš„oldVnodeæ˜¯å¦æ˜¯ä¸€ä¸ªçœŸå®å…ƒç´ \r\n  // è¿™é‡Œå¾ˆå…³é”®  åˆæ¬¡æ¸²æŸ“ ä¼ å…¥çš„vm.$elå°±æ˜¯å’±ä»¬ä¼ å…¥çš„elé€‰é¡¹  æ‰€ä»¥æ˜¯çœŸå®dom\r\n  // ä¹‹åæ›´æ–°vm.$elè¢«æ›¿æ¢æˆäº†æ›´æ–°ä¹‹å‰çš„è™šæ‹Ÿdom\r\n  if (!oldVnode) {\r\n    // ç»„ä»¶çš„åˆ›å»ºè¿‡ç¨‹æ˜¯æ²¡æœ‰elå±æ€§çš„\r\n    return createElm(vnode);\r\n  } else {\r\n    const isRealElement = oldVnode.nodeType;\r\n    if (isRealElement) {\r\n      // oldVnodeæ˜¯çœŸå®domå…ƒç´  å°±ä»£è¡¨åˆæ¬¡æ¸²æŸ“\r\n      const oldElm = oldVnode;\r\n      const parentElm = oldElm.parentNode;\r\n      // å°†è™šæ‹Ÿdomè½¬åŒ–æˆçœŸå®domèŠ‚ç‚¹\r\n      const el = createElm(vnode);\r\n      // æ’å…¥åˆ° è€çš„elèŠ‚ç‚¹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é¢ å°±ç›¸å½“äºæ’å…¥åˆ°è€çš„elèŠ‚ç‚¹çš„åé¢\r\n      // è¿™é‡Œä¸ç›´æ¥ä½¿ç”¨çˆ¶å…ƒç´ appendChildæ˜¯ä¸ºäº†ä¸ç ´åæ›¿æ¢çš„ä½ç½®\r\n      parentElm.insertBefore(el, oldElm.nextSibling);\r\n      // åˆ é™¤è€çš„elèŠ‚ç‚¹\r\n      parentElm.removeChild(oldVnode);\r\n      return el;\r\n    } else {\r\n      // oldVnodeæ˜¯è™šæ‹Ÿdom å°±æ˜¯æ›´æ–°è¿‡ç¨‹ ä½¿ç”¨diffç®—æ³•\r\n      if (oldVnode.tag !== vnode.tag) {\r\n        // å¦‚æœæ–°æ—§æ ‡ç­¾ä¸ä¸€è‡´ ç”¨æ–°çš„æ›¿æ¢æ—§çš„ oldVnode.elä»£è¡¨çš„æ˜¯çœŸå®domèŠ‚ç‚¹\r\n        oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el);\r\n      }\r\n      // å¦‚æœæ—§èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹\r\n      if (!oldVnode.tag) {\r\n        if (oldVnode.text !== vnode.text) {\r\n          oldVnode.el.textContent = vnode.text;\r\n        }\r\n      }\r\n      // ä¸ç¬¦åˆä¸Šé¢ä¸¤ç§ ä»£è¡¨æ ‡ç­¾ä¸€è‡´ å¹¶ä¸”ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹\r\n      // ä¸ºäº†èŠ‚ç‚¹å¤ç”¨ æ‰€ä»¥ç›´æ¥æŠŠæ—§çš„è™šæ‹Ÿdomå¯¹åº”çš„çœŸå®domèµ‹å€¼ç»™æ–°çš„è™šæ‹Ÿdomçš„elå±æ€§\r\n      const el = (vnode.el = oldVnode.el);\r\n      // æ›´æ–°å±æ€§\r\n      updateProperties(vnode, oldVnode.data);\r\n\r\n      const oldCh = oldVnode.children || []; // è€çš„å„¿å­\r\n      const newCh = vnode.children || []; // æ–°çš„å„¿å­\r\n      if (oldCh.length > 0 && newCh.length > 0) {\r\n        // æ–°è€éƒ½å­˜åœ¨å­èŠ‚ç‚¹\r\n        updateChildren(el, oldCh, newCh);\r\n      } else if (oldCh.length) {\r\n        // è€çš„æœ‰å„¿å­æ–°çš„æ²¡æœ‰\r\n        el.innerHTML = \"\";\r\n      } else if (newCh.length) {\r\n        // æ–°çš„æœ‰å„¿å­\r\n        for (let i = 0; i < newCh.length; i++) {\r\n          const child = newCh[i];\r\n          el.appendChild(createElm(child));\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction createComponent(vnode) {\r\n  // åˆå§‹åŒ–ç»„ä»¶\r\n  // åˆ›å»ºç»„ä»¶å®ä¾‹\r\n  let i = vnode.data;\r\n  if ((i = i.hook) && (i = i.init)) {\r\n    i(vnode);\r\n  }\r\n  // å¦‚æœç»„ä»¶å®ä¾‹åŒ–å®Œæ¯•æœ‰componentInstanceå±æ€§ é‚£è¯æ˜æ˜¯ç»„ä»¶\r\n  if (vnode.componentInstance) {\r\n    return true;\r\n  }\r\n}\r\n\r\n// è™šæ‹Ÿdomè½¬æˆçœŸå®dom\r\nfunction createElm(vnode) {\r\n  const {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text\r\n  } = vnode;\r\n  //   åˆ¤æ–­è™šæ‹Ÿdom æ˜¯å…ƒç´ èŠ‚ç‚¹è¿˜æ˜¯æ–‡æœ¬èŠ‚ç‚¹\r\n  if (typeof tag === \"string\") {\r\n    if (createComponent(vnode)) {\r\n      // å¦‚æœæ˜¯ç»„ä»¶ è¿”å›çœŸå®ç»„ä»¶æ¸²æŸ“çš„çœŸå®dom\r\n      return vnode.componentInstance.$el;\r\n    }\r\n    //   è™šæ‹Ÿdomçš„elå±æ€§æŒ‡å‘çœŸå®dom æ–¹ä¾¿åç»­æ›´æ–°diffç®—æ³•æ“ä½œ\r\n    vnode.el = document.createElement(tag);\r\n    // è§£æè™šæ‹Ÿdomå±æ€§\r\n    updateProperties(vnode);\r\n    // å¦‚æœæœ‰å­èŠ‚ç‚¹å°±é€’å½’æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹é‡Œé¢\r\n    children.forEach((child) => {\r\n      return vnode.el.appendChild(createElm(child));\r\n    });\r\n  } else {\r\n    //   æ–‡æœ¬èŠ‚ç‚¹\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\n// è§£ævnodeçš„dataå±æ€§ æ˜ å°„åˆ°çœŸå®domä¸Š\r\nfunction updateProperties(vnode, oldProps = {}) {\r\n  const newProps = vnode.data || {};\r\n\r\n  const el = vnode.el; // çœŸå®èŠ‚ç‚¹\r\n\r\n  // å¦‚æœæ–°çš„èŠ‚ç‚¹æ²¡æœ‰ éœ€è¦æŠŠè€çš„èŠ‚ç‚¹å±æ€§ç§»é™¤\r\n  for (const k in oldProps) {\r\n    if (!newProps[k]) {\r\n      el.removeAttribute(k);\r\n    }\r\n  }\r\n  // å¯¹styleæ ·å¼åšç‰¹æ®Šå¤„ç† å¦‚æœæ–°çš„æ²¡æœ‰ éœ€è¦æŠŠè€çš„styleå€¼ç½®ä¸ºç©º\r\n  const newStyle = newProps.style || {};\r\n  const oldStyle = oldProps.style || {};\r\n  for (const key in oldStyle) {\r\n    if (!newStyle[key]) {\r\n      el.style[key] = \"\";\r\n    }\r\n  }\r\n  // éå†æ–°çš„å±æ€§ è¿›è¡Œå¢åŠ æ“ä½œ\r\n  for (const key in newProps) {\r\n    if (key === \"style\") {\r\n      for (const styleName in newProps.style) {\r\n        el.style[styleName] = newProps.style[styleName];\r\n      }\r\n    } else if (key === \"class\") {\r\n      el.className = newProps.class;\r\n    } else {\r\n      // ç»™è¿™ä¸ªå…ƒç´ æ·»åŠ å±æ€§ å€¼å°±æ˜¯å¯¹åº”çš„å€¼\r\n      el.setAttribute(key, newProps[key]);\r\n    }\r\n  }\r\n}\r\n\r\n// åˆ¤æ–­ä¸¤ä¸ªvnodeçš„æ ‡ç­¾å’Œkeyæ˜¯å¦ç›¸åŒ å¦‚æœç›¸åŒ å°±å¯ä»¥è®¤ä¸ºæ˜¯åŒä¸€èŠ‚ç‚¹å°±åœ°å¤ç”¨\r\nfunction isSameVnode(oldVnode, newVnode) {\r\n  return oldVnode.tag === newVnode.tag && oldVnode.key === newVnode.key;\r\n}\r\n// diffç®—æ³•æ ¸å¿ƒ é‡‡ç”¨åŒæŒ‡é’ˆçš„æ–¹å¼ å¯¹æ¯”æ–°è€vnodeçš„å„¿å­èŠ‚ç‚¹\r\nfunction updateChildren(parent, oldCh, newCh) {\r\n  let oldStartIndex = 0; //è€å„¿å­çš„èµ·å§‹ä¸‹æ ‡\r\n  let oldStartVnode = oldCh[0]; //è€å„¿å­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹\r\n  let oldEndIndex = oldCh.length - 1; //è€å„¿å­çš„ç»“æŸä¸‹æ ‡\r\n  let oldEndVnode = oldCh[oldEndIndex]; //è€å„¿å­çš„èµ·ç»“æŸèŠ‚ç‚¹\r\n\r\n  let newStartIndex = 0; //åŒä¸Š  æ–°å„¿å­çš„\r\n  let newStartVnode = newCh[0];\r\n  let newEndIndex = newCh.length - 1;\r\n  let newEndVnode = newCh[newEndIndex];\r\n\r\n  // æ ¹æ®keyæ¥åˆ›å»ºè€çš„å„¿å­çš„indexæ˜ å°„è¡¨  ç±»ä¼¼ {'a':0,'b':1} ä»£è¡¨keyä¸º'a'çš„èŠ‚ç‚¹åœ¨ç¬¬ä¸€ä¸ªä½ç½® keyä¸º'b'çš„èŠ‚ç‚¹åœ¨ç¬¬äºŒä¸ªä½ç½®\r\n  function makeIndexByKey(children) {\r\n    let map = {};\r\n    children.forEach((item, index) => {\r\n      map[item.key] = index;\r\n    });\r\n    return map;\r\n  }\r\n  // ç”Ÿæˆçš„æ˜ å°„è¡¨\r\n  let map = makeIndexByKey(oldCh);\r\n\r\n  // åªæœ‰å½“æ–°è€å„¿å­çš„åŒæŒ‡æ ‡çš„èµ·å§‹ä½ç½®ä¸å¤§äºç»“æŸä½ç½®çš„æ—¶å€™  æ‰èƒ½å¾ªç¯ ä¸€æ–¹åœæ­¢äº†å°±éœ€è¦ç»“æŸå¾ªç¯\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    // å› ä¸ºæš´åŠ›å¯¹æ¯”è¿‡ç¨‹æŠŠç§»åŠ¨çš„vnodeç½®ä¸º undefined å¦‚æœä¸å­˜åœ¨vnodeèŠ‚ç‚¹ ç›´æ¥è·³è¿‡\r\n    if (!oldStartVnode) {\r\n      oldStartVnode = oldCh[++oldStartIndex]\r\n    } else if (!oldEndVnode) {\r\n      oldEndVnode = oldCh[--oldEndIndex]\r\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) {\r\n      // å¤´å’Œå¤´å¯¹æ¯” ä¾æ¬¡å‘åè¿½åŠ \r\n      patch(oldStartVnode, newStartVnode); //é€’å½’æ¯”è¾ƒå„¿å­ä»¥åŠä»–ä»¬çš„å­èŠ‚ç‚¹\r\n      oldStartVnode = oldCh[++oldStartIndex];\r\n      newStartVnode = newCh[++newStartIndex];\r\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\r\n      //å°¾å’Œå°¾å¯¹æ¯” ä¾æ¬¡å‘å‰è¿½åŠ \r\n      patch(oldEndVnode, newEndVnode);\r\n      oldEndVnode = oldCh[--oldEndIndex];\r\n      newEndVnode = newCh[--newEndIndex];\r\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\r\n      // è€çš„å¤´å’Œæ–°çš„å°¾ç›¸åŒ æŠŠè€çš„å¤´éƒ¨ç§»åŠ¨åˆ°å°¾éƒ¨\r\n      patch(oldStartVnode, newEndVnode);\r\n      parent.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling); //insertBeforeå¯ä»¥ç§»åŠ¨æˆ–è€…æ’å…¥çœŸå®dom\r\n      oldStartVnode = oldCh[++oldStartIndex];\r\n      newEndVnode = newCh[--newEndIndex];\r\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\r\n      // è€çš„å°¾å’Œæ–°çš„å¤´ç›¸åŒ æŠŠè€çš„å°¾éƒ¨ç§»åŠ¨åˆ°å¤´éƒ¨\r\n      patch(oldEndVnode, newStartVnode);\r\n      parent.insertBefore(oldEndVnode.el, oldStartVnode.el);\r\n      oldEndVnode = oldCh[--oldEndIndex];\r\n      newStartVnode = newCh[++newStartIndex];\r\n    } else {\r\n      // ä¸Šè¿°å››ç§æƒ…å†µéƒ½ä¸æ»¡è¶³ é‚£ä¹ˆéœ€è¦æš´åŠ›å¯¹æ¯”\r\n      // æ ¹æ®è€çš„å­èŠ‚ç‚¹çš„keyå’Œindexçš„æ˜ å°„è¡¨ ä»æ–°çš„å¼€å§‹å­èŠ‚ç‚¹è¿›è¡ŒæŸ¥æ‰¾ å¦‚æœå¯ä»¥æ‰¾åˆ°å°±è¿›è¡Œç§»åŠ¨æ“ä½œ å¦‚æœæ‰¾ä¸åˆ°åˆ™ç›´æ¥è¿›è¡Œæ’å…¥\r\n      let moveIndex = map[newStartVnode.key];\r\n      if (!moveIndex) {\r\n        // è€çš„èŠ‚ç‚¹æ‰¾ä¸åˆ°  ç›´æ¥æ’å…¥\r\n        parent.insertBefore(createElm(newStartVnode), oldStartVnode.el);\r\n      } else {\r\n        let moveVnode = oldCh[moveIndex]; //æ‰¾å¾—åˆ°å°±æ‹¿åˆ°è€çš„èŠ‚ç‚¹\r\n        oldCh[moveIndex] = undefined; //è¿™ä¸ªæ˜¯å ä½æ“ä½œ é¿å…æ•°ç»„å¡Œé™·  é˜²æ­¢è€èŠ‚ç‚¹ç§»åŠ¨èµ°äº†ä¹‹åç ´åäº†åˆå§‹çš„æ˜ å°„è¡¨ä½ç½®\r\n        parent.insertBefore(moveVnode.el, oldStartVnode.el); //æŠŠæ‰¾åˆ°çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€å‰é¢\r\n        patch(moveVnode, newStartVnode);\r\n      }\r\n    }\r\n  }\r\n  // å¦‚æœè€èŠ‚ç‚¹å¾ªç¯å®Œæ¯•äº† ä½†æ˜¯æ–°èŠ‚ç‚¹è¿˜æœ‰  è¯æ˜  æ–°èŠ‚ç‚¹éœ€è¦è¢«æ·»åŠ åˆ°å¤´éƒ¨æˆ–è€…å°¾éƒ¨\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      // è¿™æ˜¯ä¸€ä¸ªä¼˜åŒ–å†™æ³• insertBeforeçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯nullç­‰åŒäºappendChildä½œç”¨\r\n      const ele =\r\n        newCh[newEndIndex + 1] == null ? null : newCh[newEndIndex + 1].el;\r\n      parent.insertBefore(createElm(newCh[i]), ele);\r\n    }\r\n  }\r\n  // å¦‚æœæ–°èŠ‚ç‚¹å¾ªç¯å®Œæ¯• è€èŠ‚ç‚¹è¿˜æœ‰  è¯æ˜è€çš„èŠ‚ç‚¹éœ€è¦ç›´æ¥è¢«åˆ é™¤\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      let child = oldCh[i];\r\n      if (child != undefined) {\r\n        parent.removeChild(child.el)\r\n      }\r\n    }\r\n  }\r\n\r\n}","import {\r\n  patch\r\n} from \"./vdom/patch\";\r\nimport Watcher from \"./observer/watcher\";\r\nexport function mountComponent(vm, el) {\r\n\r\n  // ä¸Šä¸€æ­¥æ¨¡æ¿ç¼–è¯‘è§£æç”Ÿæˆäº†renderå‡½æ•°\r\n  // ä¸‹ä¸€æ­¥å°±æ˜¯æ‰§è¡Œvm._render()æ–¹æ³• è°ƒç”¨ç”Ÿæˆçš„renderå‡½æ•° ç”Ÿæˆè™šæ‹Ÿdom\r\n  // æœ€åä½¿ç”¨vm._update()æ–¹æ³•æŠŠè™šæ‹Ÿdomæ¸²æŸ“åˆ°é¡µé¢\r\n\r\n  // çœŸå®çš„elèµ‹å€¼ç»™å®ä¾‹çš„$elå±æ€§\r\n  vm.$el = el;\r\n  //   _updateå’Œ._renderæ–¹æ³•éƒ½æ˜¯æŒ‚è½½åœ¨VueåŸå‹çš„æ–¹æ³•  ç±»ä¼¼_init\r\n\r\n  // å¼•å…¥watcherçš„æ¦‚å¿µ è¿™é‡Œæ³¨å†Œä¸€ä¸ªæ¸²æŸ“watcher æ‰§è¡Œvm._update(vm._render())æ–¹æ³•æ¸²æŸ“è§†å›¾\r\n  callHook(vm, \"beforeMount\");\r\n  let updateComponent = () => {\r\n    vm._update(vm._render());\r\n  };\r\n  new Watcher(\r\n    vm,\r\n    updateComponent,\r\n    () => {\r\n      callHook(vm, \"beforeUpdate\");\r\n    },\r\n    true\r\n  );\r\n  callHook(vm, \"mounted\");\r\n}\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  // æŠŠ_updateæŒ‚è½½åœ¨Vueçš„åŸå‹\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    const prevVnode = vm._vnode; // ä¿ç•™ä¸Šä¸€æ¬¡çš„vnode\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      // patchæ˜¯æ¸²æŸ“vnodeä¸ºçœŸå®domæ ¸å¿ƒ\r\n      vm.$el = patch(vm.$el, vnode); // åˆæ¬¡æ¸²æŸ“ vm._vnodeè‚¯å®šä¸å­˜åœ¨ è¦é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹ æ¸²æŸ“å‡ºçœŸå®çš„dom èµ‹å€¼ç»™$elå±æ€§\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode); // æ›´æ–°æ—¶æŠŠä¸Šæ¬¡çš„vnodeå’Œè¿™æ¬¡æ›´æ–°çš„vnodeç©¿è¿›å» è¿›è¡Œdiffç®—æ³•\r\n    }\r\n  };\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n  // ä¾æ¬¡æ‰§è¡Œç”Ÿå‘½å‘¨æœŸå¯¹åº”çš„æ–¹æ³•\r\n  const handlers = vm.$options[hook];\r\n  if (handlers) {\r\n    for (let i = 0; i < handlers.length; i++) {\r\n      handlers[i].call(vm); //ç”Ÿå‘½å‘¨æœŸé‡Œé¢çš„thisæŒ‡å‘å½“å‰å®ä¾‹\r\n    }\r\n  }\r\n}","import { initState } from \"./state\";\r\nimport { compileToFunctions } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { mergeOptions } from \"./util/index\";\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    // è¿™é‡Œçš„thisä»£è¡¨è°ƒç”¨_initæ–¹æ³•çš„å¯¹è±¡(å®ä¾‹å¯¹è±¡)\r\n    //  this.$optionså°±æ˜¯ç”¨æˆ·new Vueçš„æ—¶å€™ä¼ å…¥çš„å±æ€§å’Œå…¨å±€çš„Vue.optionsåˆå¹¶ä¹‹åçš„ç»“æœ\r\n    vm.$options = mergeOptions(vm.constructor.options, options);\r\n    callHook(vm, \"beforeCreate\");\r\n    // åˆå§‹åŒ–çŠ¶æ€\r\n    initState(vm);\r\n    callHook(vm, \"created\");\r\n    // å¦‚æœæœ‰elå±æ€§ è¿›è¡Œæ¨¡æ¿æ¸²æŸ“\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  };\r\n\r\n  // è¿™å—ä»£ç åœ¨æºç é‡Œé¢çš„ä½ç½®å…¶å®æ˜¯æ”¾åœ¨entry-runtime-with-compiler.jsé‡Œé¢\r\n  // ä»£è¡¨çš„æ˜¯Vueæºç é‡Œé¢åŒ…å«äº†compileç¼–è¯‘åŠŸèƒ½ è¿™ä¸ªå’Œruntime-onlyç‰ˆæœ¬éœ€è¦åŒºåˆ†å¼€\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n\r\n    // å¦‚æœä¸å­˜åœ¨renderå±æ€§\r\n    if (!options.render) {\r\n      // å¦‚æœå­˜åœ¨templateå±æ€§\r\n      let template = options.template;\r\n\r\n      if (!template && el) {\r\n        // å¦‚æœä¸å­˜åœ¨renderå’Œtemplate ä½†æ˜¯å­˜åœ¨elå±æ€§ ç›´æ¥å°†æ¨¡æ¿èµ‹å€¼åˆ°elæ‰€åœ¨çš„å¤–å±‚htmlç»“æ„ï¼ˆå°±æ˜¯elæœ¬èº« å¹¶ä¸æ˜¯çˆ¶å…ƒç´ ï¼‰\r\n        template = el.outerHTML;\r\n      }\r\n\r\n      // æœ€ç»ˆéœ€è¦æŠŠtempalteæ¨¡æ¿è½¬åŒ–æˆrenderå‡½æ•°\r\n      if (template) {\r\n        const render = compileToFunctions(template);\r\n        options.render = render;\r\n      }\r\n    }\r\n\r\n    // å°†å½“å‰ç»„ä»¶å®ä¾‹æŒ‚è½½åˆ°çœŸå®çš„elèŠ‚ç‚¹ä¸Šé¢\r\n    return mountComponent(vm, el);\r\n  };\r\n}\r\n","import { isObject, isReservedTag } from \"../util/index\";\r\n// å®šä¹‰Vnodeç±»\r\nexport default class Vnode {\r\n  constructor(tag, data, key, children, text, componentOptions) {\r\n    console.log(\r\n      \"ğŸš€ ~ file: index.js ~ line 5 ~ Vnode ~ constructor ~ componentOptions\",\r\n      componentOptions\r\n    );\r\n    this.tag = tag;\r\n    this.data = data;\r\n    this.key = key;\r\n    this.children = children;\r\n    this.text = text;\r\n    this.componentOptions = componentOptions;\r\n  }\r\n}\r\n\r\n// åˆ›å»ºå…ƒç´ vnode ç­‰äºrenderå‡½æ•°é‡Œé¢çš„ h=>h(App)\r\nexport function createElement(vm, tag, data = {}, ...children) {\r\n  let key = data.key;\r\n\r\n  if (isReservedTag(tag)) {\r\n    // å¦‚æœæ˜¯æ™®é€šæ ‡ç­¾\r\n    return new Vnode(tag, data, key, children);\r\n  } else {\r\n    // å¦åˆ™å°±æ˜¯ç»„ä»¶\r\n    let Ctor = vm.$options.components[tag]; //è·å–ç»„ä»¶çš„æ„é€ å‡½æ•°\r\n    return createComponent(vm, tag, data, key, children, Ctor);\r\n  }\r\n}\r\n\r\nfunction createComponent(vm, tag, data, key, children, Ctor) {\r\n  if (isObject(Ctor)) {\r\n    Ctor = vm.$options._base.extend(Ctor);\r\n  }\r\n  // å£°æ˜ç»„ä»¶è‡ªå·±å†…éƒ¨çš„ç”Ÿå‘½å‘¨æœŸ\r\n  data.hook = {\r\n    // ç»„ä»¶åˆ›å»ºè¿‡ç¨‹çš„è‡ªèº«åˆå§‹åŒ–æ–¹æ³•\r\n    init(vnode) {\r\n      let child = (vnode.componentInstance = new Ctor({ _isComponent: true })); //å®ä¾‹åŒ–ç»„ä»¶\r\n      child.$mount(); //å› ä¸ºæ²¡æœ‰ä¼ å…¥elå±æ€§  éœ€è¦æ‰‹åŠ¨æŒ‚è½½ ä¸ºäº†åœ¨ç»„ä»¶å®ä¾‹ä¸Šé¢å¢åŠ $elæ–¹æ³•å¯ç”¨äºç”Ÿæˆç»„ä»¶çš„çœŸå®æ¸²æŸ“èŠ‚ç‚¹\r\n    },\r\n  };\r\n\r\n  // ç»„ä»¶vnodeä¹Ÿå«å ä½ç¬¦vnode  ==> $vnode\r\n  return new Vnode(\r\n    `vue-component-${Ctor.cid}-${tag}`,\r\n    data,\r\n    key,\r\n    undefined,\r\n    undefined,\r\n    {\r\n      Ctor,\r\n      children,\r\n    }\r\n  );\r\n}\r\n\r\n// åˆ›å»ºæ–‡æœ¬vnode\r\nexport function createTextNode(vm, text) {\r\n  return new Vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n","import { createElement, createTextNode } from \"./vdom/index\";\r\nimport { nextTick } from \"./util/next-tick\";\r\n\r\nexport function renderMixin(Vue) {\r\n  // renderå‡½æ•°é‡Œé¢æœ‰_c _v _sæ–¹æ³•éœ€è¦å®šä¹‰\r\n  Vue.prototype._c = function (...args) {\r\n    // åˆ›å»ºè™šæ‹Ÿdomå…ƒç´ \r\n    return createElement(this,...args);\r\n  };\r\n\r\n  Vue.prototype._v = function (text) {\r\n    // åˆ›å»ºè™šæ‹Ÿdomæ–‡æœ¬\r\n    return createTextNode(this,text);\r\n  };\r\n  Vue.prototype._s = function (val) {\r\n    // å¦‚æœæ¨¡æ¿é‡Œé¢çš„æ˜¯ä¸€ä¸ªå¯¹è±¡  éœ€è¦JSON.stringify\r\n    return val == null\r\n      ? \"\"\r\n      : typeof val === \"object\"\r\n      ? JSON.stringify(val)\r\n      : val;\r\n  };\r\n\r\n  Vue.prototype._render = function () {\r\n    \r\n    const vm = this;\r\n    // è·å–æ¨¡æ¿ç¼–è¯‘ç”Ÿæˆçš„renderæ–¹æ³•\r\n    const { render } = vm.$options;\r\n    console.log(\"ğŸš€ ~ file: render.js ~ line 28 ~ renderMixin ~ render\", render);\r\n    // ç”Ÿæˆvnode--è™šæ‹Ÿdom\r\n    const vnode = render.call(vm);\r\n    return vnode;\r\n  };\r\n\r\n  // æŒ‚è½½åœ¨åŸå‹çš„nextTickæ–¹æ³• å¯ä¾›ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨\r\n  Vue.prototype.$nextTick = nextTick;\r\n}\r\n","import {mergeOptions} from '../util/index'\r\nexport default function initMixin(Vue){\r\n  Vue.mixin = function (mixin) {\r\n    //   åˆå¹¶å¯¹è±¡\r\n      this.options=mergeOptions(this.options,mixin)\r\n  };\r\n}","import { ASSETS_TYPE } from './const'\r\nexport default function initAssetRegisters(Vue) {\r\n  ASSETS_TYPE.forEach((type) => {\r\n    Vue[type] = function(id, definition) {\r\n      if (type === 'component') {\r\n        // å…¨å±€ç»„ä»¶æ³¨å†Œ\r\n        // å­ç»„ä»¶å¯èƒ½ä¹Ÿæœ‰extendæ–¹æ³•  VueComponent.componentæ–¹æ³•\r\n        definition = this.options._base.extend(definition)\r\n      } else if (type === 'filter') {\r\n      } else if (type === 'directive') {\r\n      }\r\n      this.options[type + 's'][id] = definition\r\n    }\r\n  })\r\n}\r\n","import { mergeOptions } from \"../util/index\";\r\nexport default function initExtend(Vue) {\r\n  let cid = 0; \r\n  // åˆ›å»ºå­ç±»ç»§æ‰¿Vueçˆ¶ç±» ä¾¿äºå±æ€§æ‰©å±•\r\n  Vue.extend = function (extendOptions) {\r\n    // åˆ›å»ºå­ç±»çš„æ„é€ å‡½æ•° å¹¶ä¸”è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•\r\n    const Sub = function VueComponent(options) {\r\n      this._init(options);\r\n    };\r\n    Sub.cid = cid++; //ç»„ä»¶çš„å”¯ä¸€æ ‡è¯†\r\n    Sub.prototype = Object.create(this.prototype); // å­ç±»åŸå‹æŒ‡å‘çˆ¶ç±»\r\n    Sub.prototype.constructor = Sub; //constructoræŒ‡å‘è‡ªå·±\r\n    Sub.options = mergeOptions(this.options, extendOptions); //åˆå¹¶è‡ªå·±çš„optionså’Œçˆ¶ç±»çš„options\r\n    return Sub;\r\n  };\r\n}\r\n","import initMixin from \"./mixin\";\r\nimport initAssetRegisters from \"./assets\";\r\nimport initExtend from './initExtend'\r\nimport {ASSETS_TYPE} from './const'\r\n\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {}; // å…¨å±€çš„ç»„ä»¶ æŒ‡ä»¤ è¿‡æ»¤å™¨\r\n  initMixin(Vue);\r\n  ASSETS_TYPE.forEach((type) => {\r\n    Vue.options[type + \"s\"] = {};\r\n  });\r\n  Vue.options._base = Vue; //_baseæ˜¯Vueçš„æ„é€ å‡½æ•°\r\n\r\n  initExtend(Vue) //æ³¨å†Œextendæ–¹æ³•\r\n  initAssetRegisters(Vue); //assetsæ³¨å†Œæ–¹æ³•\r\n}\r\n","import { initMixin } from \"./init.js\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./render\";\r\nimport {initGlobalApi}from './global-api/index'\r\nimport {stateMixin}from './state'\r\n// Vueå°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•° é€šè¿‡newå…³é”®å­—è¿›è¡Œå®ä¾‹åŒ–\r\nfunction Vue(options) {\r\n  // è¿™é‡Œå¼€å§‹è¿›è¡ŒVueåˆå§‹åŒ–å·¥ä½œ\r\n  this._init(options);\r\n}\r\n// _initæ–¹æ³•æ˜¯æŒ‚è½½åœ¨VueåŸå‹çš„æ–¹æ³• é€šè¿‡å¼•å…¥æ–‡ä»¶çš„æ–¹å¼è¿›è¡ŒåŸå‹æŒ‚è½½éœ€è¦ä¼ å…¥Vue\r\n// æ­¤åšæ³•æœ‰åˆ©äºä»£ç åˆ†å‰²\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifecycleMixin(Vue);\r\nstateMixin(Vue);\r\ninitGlobalApi(Vue)\r\nexport default Vue;\r\n"],"names":["id","Dep","subs","target","addDep","forEach","watcher","update","push","targetStack","pushTarget","popTarget","pop","length","arrayProto","Array","prototype","arrayMethods","Object","create","methodsToPatch","method","args","result","apply","ob","__ob__","inserted","slice","observeArray","dep","notify","Observer","value","defineProperty","enumerable","writable","configurable","isArray","__proto__","walk","data","keys","i","key","defineReactive","items","observe","childOb","get","depend","dependArray","set","newValue","e","l","callbacks","pending","flushCallbacks","timerFunc","Promise","p","resolve","then","MutationObserver","counter","observer","textNode","document","createTextNode","String","characterData","setImmediate","setTimeout","nextTick","cb","queue","has","flushSchedulerQueue","index","run","queueWatcher","undefined","ASSETS_TYPE","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childVal","concat","mergeAssets","res","k","hook","type","mergeOptions","parent","child","options","mergeFiled","hasOwnProperty","isObject","isReservedTag","tagName","str","obj","split","tag","Watcher","vm","exprOrFn","deps","depsId","Set","user","lazy","dirty","getter","path","call","add","addSub","newVal","oldVal","initState","opts","$options","props","methods","initData","computed","initComputed","watch","initWatch","_data","proxy","watchers","_computedWatchers","userDef","defineComputed","sharedPropertyDefinition","createComputedGetter","evaluate","handler","handle","createWatcher","$watch","object","sourceKey","stateMixin","Vue","immediate","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","parse","html","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","createASTElement","attrs","children","handleStartTag","element","handleEndTag","handleChars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","start","end","attr","name","n","defaultTagRE","gen","node","generate","test","JSON","stringify","lastIndex","tokens","exec","trim","join","genProps","item","getChildren","el","map","c","code","compileToFunctions","template","ast","renderFn","Function","patch","oldVnode","vnode","createElm","isRealElement","nodeType","oldElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","oldCh","newCh","updateChildren","innerHTML","appendChild","createComponent","init","componentInstance","$el","createElement","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styleName","className","setAttribute","isSameVnode","newVnode","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeIndexByKey","moveIndex","moveVnode","ele","mountComponent","callHook","updateComponent","_update","_render","lifecycleMixin","prevVnode","_vnode","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","Vnode","componentOptions","console","log","Ctor","components","_base","extend","_isComponent","cid","renderMixin","_c","_v","_s","val","$nextTick","mixin","initAssetRegisters","definition","initExtend","extendOptions","Sub","VueComponent","initGlobalApi"],"mappings":"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"}